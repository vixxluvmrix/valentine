<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Gift Box üéÅ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    html, body { height: 100%; }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #ff9a9e, #fecfef 40%, #fbc2eb 60%, #a18cd1 100%);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Poppins", sans-serif;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: stretch;
      overflow: hidden;
    }

    .page-shell {
      position: relative;
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      padding: 12px 12px env(safe-area-inset-bottom, 12px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-height: 100vh;
    }

    .heart-particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }

    .emoji-heart {
      position: absolute;
      font-size: 18px;
      animation: floatUp linear infinite;
      opacity: 0.9;
      filter: drop-shadow(0 0 6px rgba(255,182,193,0.9));
      pointer-events: none;
    }

    @keyframes floatUp {
      0%   { transform: translateY(0); opacity: 0; }
      10%  { opacity: 1; }
      100% { transform: translateY(-120vh); opacity: 0; }
    }

    .card {
      position: relative;
      z-index: 1;
      width: 100%;
      border-radius: 24px;
      background: radial-gradient(circle at top left, rgba(255,255,255,0.2), rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.3);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.55),
        0 0 40px rgba(255,182,193,0.7);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      padding: 18px 16px 18px;
      display: flex;
      flex-direction: column;
      max-height: 100%;
      overflow: hidden;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .title-group h1 {
      font-size: 1.45rem;
      text-shadow: 0 2px 6px rgba(0,0,0,0.6);
    }

    .title-group p {
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .music-toggle {
      background: rgba(0,0,0,0.45);
      border-radius: 999px;
      padding: 5px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.78rem;
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.45);
      box-shadow: 0 6px 14px rgba(0,0,0,0.45);
      user-select: none;
      min-height: 30px;
      flex-shrink: 0;
    }

    .music-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ff6b81;
      box-shadow: 0 0 10px rgba(255,107,129,0.9);
      transition: 0.2s;
    }

    .music-toggle.active .music-dot {
      background: #6bffb5;
      box-shadow: 0 0 10px rgba(107,255,181,0.9);
      transform: scale(1.2);
    }

    .steps-wrapper {
      margin-top: 8px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.32);
      background: linear-gradient(145deg, rgba(0,0,0,0.45), rgba(0,0,0,0.2));
      padding: 14px 12px 12px;
      box-shadow:
        inset 0 0 25px rgba(255,255,255,0.08),
        0 14px 30px rgba(0,0,0,0.6);
      display: flex;
      flex-direction: column;
      max-height: calc(100vh - 120px);
    }

    .step {
      display: none;
      max-height: calc(100% - 4px);
      overflow-y: auto;
      padding-right: 4px;
    }

    .step.active {
      display: block;
      animation: fadeInUp 0.6s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(12px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    h2 {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 4px;
    }

    .step-subtitle {
      text-align: center;
      font-size: 0.82rem;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    .gift-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 6px;
    }

    .gift-box {
      position: relative;
      width: 140px;
      height: 140px;
      margin: 6px auto 6px;
      cursor: pointer;
      transition: transform 0.4s ease, filter 0.4s ease;
      touch-action: manipulation;
    }

    .gift-box:hover {
      transform: translateY(-2px) scale(1.03);
      filter: drop-shadow(0 0 22px rgba(255,241,196,0.95));
    }

    .box-base {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 70%;
      background: linear-gradient(135deg, #ff758c, #ff7eb3);
      border-radius: 18px;
      box-shadow: 0 18px 30px rgba(0,0,0,0.55);
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.4);
    }

    .box-stripe {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(90deg, rgba(255,255,255,0.18) 0 12px, transparent 12px 24px),
        linear-gradient(0deg, rgba(255,255,255,0.16) 0 12px, transparent 12px 24px);
      opacity: 0.9;
      mix-blend-mode: screen;
    }

    .box-lid {
      position: absolute;
      top: 10%;
      left: -6%;
      width: 112%;
      height: 32%;
      background: linear-gradient(135deg, #ffafbd, #ffc3a0);
      border-radius: 18px;
      box-shadow: 0 10px 18px rgba(0,0,0,0.55);
      transform-origin: bottom center;
      transition: transform 0.5s ease;
      border: 1px solid rgba(255,255,255,0.45);
    }

    .box-ribbon {
      position: absolute;
      top: 0;
      left: 50%;
      width: 22px;
      height: 100%;
      background: linear-gradient(180deg, #ffd700, #ffef99);
      transform: translateX(-50%);
      box-shadow: 0 0 10px rgba(255,255,255,0.7);
    }

    .box-bow {
      position: absolute;
      top: -16px;
      left: 50%;
      transform: translateX(-50%);
      width: 64px;
      height: 36px;
    }

    .box-bow::before,
    .box-bow::after {
      content: "";
      position: absolute;
      width: 32px;
      height: 32px;
      border-radius: 32px 32px 0 32px;
      background: radial-gradient(circle at 20% 20%, #fff7e3, #ffb347);
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
    }

    .box-bow::before { left: 0; transform: rotate(-24deg); }
    .box-bow::after  { right: 0; transform: rotate(24deg) scaleX(-1); }

    .box-string {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 18px;
      height: 100%;
      background: linear-gradient(180deg, #ffe066, #ffb347);
      box-shadow: 0 0 18px rgba(0,0,0,0.3);
      border-radius: 999px;
    }

    .gift-box.opened .box-lid { transform: rotate(-40deg) translateY(-6px); }

    .btn-primary {
      margin-top: 10px;
      border: none;
      padding: 11px 22px;
      border-radius: 999px;
      background: linear-gradient(135deg, #ffecd2, #fcb69f);
      color: #7a1f3d;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 12px 24px rgba(0,0,0,0.55);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: 0.2s;
      font-size: 0.95rem;
      min-width: 180px;
      touch-action: manipulation;
    }

    .btn-primary:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 8px 18px rgba(0,0,0,0.6);
    }

    .tiny-hint {
      font-size: 0.75rem;
      margin-top: 6px;
      opacity: 0.85;
      text-align: center;
    }

    .envelopes {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }

    .envelope {
      border-radius: 16px;
      padding: 12px 14px 12px 12px;
      text-align: left;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-shadow: 0 12px 22px rgba(0,0,0,0.6);
      border: 1px solid rgba(255,255,255,0.55);
      transition: 0.2s;
      touch-action: manipulation;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .envelope-1 {
      background: linear-gradient(135deg, #ff4b5c, #ff8c5c);
      color: #fff9f5;
    }

    .envelope-2 {
      background: linear-gradient(135deg, #ffd600, #ffb200);
      color: #3b2500;
    }

    .envelope-3 {
      background: linear-gradient(135deg, #ff4b5c, #ffb200);
      color: #fff9f5;
    }

    .envelope:active {
      transform: translateY(1px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.65);
    }

    .envelope-emoji {
      font-size: 1.3rem;
    }

    .envelope-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .envelope-title {
      font-weight: 600;
      font-size: 0.96rem;
    }

    .envelope-sub {
      font-size: 0.8rem;
      opacity: 0.95;
    }

    .romantic-text {
      margin-top: 10px;
      font-size: 0.92rem;
      line-height: 1.6;
      text-align: left;
    }

    .romantic-text span.highlight {
      color: #ffe6f7;
      font-weight: 600;
    }

    .nav-back {
      margin-top: 10px;
      display: flex;
      justify-content: center;
    }

    .voice-audio {
      width: 100%;
      margin-top: 12px;
      border-radius: 999px;
      overflow: hidden;
      box-shadow: 0 10px 20px rgba(0,0,0,0.7);
      border: 1px solid rgba(255,255,255,0.45);
    }

    audio { width: 100%; outline: none; }

    .final-message {
      margin-top: 10px;
      font-size: 0.94rem;
      line-height: 1.65;
      text-align: left;
    }

    .question {
      margin-top: 10px;
      font-size: 1.2rem;
      text-align: center;
      text-shadow: 0 2px 6px rgba(0,0,0,0.7);
    }

    .valentine-buttons {
      margin-top: 13px;
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      position: relative;
      min-height: 52px;
    }

    .yes-btn,
    .no-btn {
      border: none;
      padding: 11px 22px;
      border-radius: 999px;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.95rem;
      box-shadow: 0 12px 24px rgba(0,0,0,0.6);
      touch-action: manipulation;
      position: relative;
      z-index: 5;
      min-width: 130px;
    }

    .yes-btn {
      background: linear-gradient(135deg, #ffecd2, #fcb69f);
      color: #7a1f3d;
    }

    .yes-btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 8px 18px rgba(0,0,0,0.7);
    }

    .no-btn {
      background: linear-gradient(135deg, #ff9a9e, #fecfef);
      color: #5d1230;
    }

    #yesMessage {
      margin-top: 12px;
      text-align: center;
      font-size: 0.86rem;
    }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal-backdrop.show {
      display: flex;
    }

    .modal-box {
      width: min(320px, 90%);
      background: radial-gradient(circle at top left, rgba(255,255,255,0.2), rgba(0,0,0,0.7));
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.4);
      padding: 16px 14px 14px;
      color: #fff;
      box-shadow:
        0 18px 40px rgba(0,0,0,0.8),
        0 0 30px rgba(255,182,193,0.7);
      text-align: center;
    }

    .modal-box p {
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .modal-actions {
      margin-top: 12px;
      display: flex;
      justify-content: center;
    }

    .modal-btn {
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, #ffecd2, #fcb69f);
      color: #7a1f3d;
      box-shadow: 0 8px 18px rgba(0,0,0,0.7);
    }

    @media (max-width: 360px) {
      .card { padding-inline: 12px; }
      .steps-wrapper { padding-inline: 10px; }
      .gift-box { transform: scale(0.95); }
    }
  </style>
</head>
<body>
  <div class="heart-particles" id="heartContainer"></div>

  <div class="modal-backdrop" id="noModal">
    <div class="modal-box">
      <p>
        <b>Warning:</b> Clicking ‚ÄúNo‚Äù may cause me to miss you even more üòå‚ù§Ô∏è<br /><br />
        My heart is hoping you choose ‚ÄúYes‚Äù‚Ä¶ just saying ü§ç
      </p>
      <div class="modal-actions">
        <button class="modal-btn" id="modalOkBtn">
          Okay, I‚Äôll try it once more
        </button>
      </div>
    </div>
  </div>

  <div class="page-shell">
    <div class="card">
      <div class="top-bar">
        <div class="title-group">
          <h1> For My Forever ‚ù§Ô∏è-üéÅ</h1><br>
          <p>Open this Slowly‚Ä¶ It‚Äôs Hiding 3 Surprises Inside.</p>
        </div>
        <div class="music-toggle" id="musicToggle">
          <div class="music-dot"></div>
          <span>Music off</span>
        </div>
      </div>

      <audio id="bgMusic" loop muted>
        <source src="bg-music.mp3" type="audio/mpeg">
      </audio>

      <div class="steps-wrapper">
        <div class="step step-1 active">
          <h2>Step 1: Open Your Gift</h2>
          <p class="step-subtitle">Tap The Box To Open It‚Ä¶ And See What I Kept For You.</p>

          <div class="gift-zone">
            <div class="gift-box" id="giftBox">
              <div class="box-base">
                <div class="box-stripe"></div>
              </div>
              <div class="box-lid">
                <div class="box-ribbon"></div>
                <div class="box-bow"></div>
                <div class="box-string"></div>
              </div>
            </div>

            <button class="btn-primary" id="openGiftBtn">
              <span>Open the Gift Box</span> üíù
            </button>
            <p class="tiny-hint">Tap the Box or the Button, My Wifey.</p>
          </div>
        </div>

        <div class="step step-2">
          <h2>Step 2: Your 3 surprises üíåüéßüíç</h2>
          <p class="step-subtitle">Please open them in order‚Ä¶ 1, then 2, then 3.</p>

          <div class="envelopes">
            <div class="envelope envelope-1" data-target="surprise1">
              <div class="envelope-header">
                <div class="envelope-title">Surprise 1: A love letter</div>
                <div class="envelope-emoji">üíå</div>
              </div>
              <div class="envelope-sub">
                Tap to read what my heart has been wanting to say‚Ä¶
              </div>
            </div>

            <div class="envelope envelope-2" data-target="surprise2">
              <div class="envelope-header">
                <div class="envelope-title">Surprise 2: My voice for you</div>
                <div class="envelope-emoji">üéß</div>
              </div>
              <div class="envelope-sub">
                Tap to hear me, even when I‚Äôm not beside you.
              </div>
            </div>

            <div class="envelope envelope-3" data-target="surprise3">
              <div class="envelope-header">
                <div class="envelope-title">Surprise 3: The big question</div>
                <div class="envelope-emoji">üíç</div>
              </div>
              <div class="envelope-sub">
                Open this last, with a deep breath. ‚ù§Ô∏è
              </div>
            </div>
          </div>
        </div>

        <div class="step step-3" id="surprise1">
          <h2>Surprise 1 üíå</h2>
          <p class="step-subtitle">Read this like I‚Äôm standing in front of you.</p>

          <p class="romantic-text">
            My Baby, My Mridini,<br /><br />
            This Is Vishal ‚Äî The One Who Loves You Quietly, Deeply, And With Intention.
            Distance Has Never Changed What I Feel For You; If Anything, It Has Made Me
            More Certain. Even When Life Has Tested Me, Even When I‚Äôve Fallen And
            Struggled To Stand Back Up, One Thought Has Always Stayed Steady ‚Äî
            <span class="highlight">You</span>.<br /><br />
            I Call You Baby, Kutty, Chellam, Pondatti, Wife ‚Äî Not Just As Cute Names,
            But Because My Heart Already Sees You That Way. You‚Äôre Not Just Someone I
            Love From Far Away; You‚Äôre Someone I Imagine Beside Me In Every Future I
            Dream Of. In My Wins, In My Failures, In The Life I‚Äôm Still Building ‚Äî You‚Äôre There.<br /><br />
            Some Days Are Hard. Some Nights Are Long. There Are Moments When I Wish I
            Could Just Sit Next To You, Hold Your Hand, And Let Silence Say What Words
            Can‚Äôt. Until That Day Comes, I Hold You Close In My Thoughts And Carry You
            In Everything I Do. Loving You Gives Me Strength, Calm, And A Reason To Keep Moving Forward.<br /><br />
            Mridini, No Matter How Many Miles Stand Between Us Right Now, My Heart Has
            Already Chosen Its Place ‚Äî With You. I‚Äôm Not Perfect, My Life Isn‚Äôt Perfect Yet,
            But My Feelings For You Are Honest, Steady, And Real. I‚Äôm Here, I‚Äôm Yours,
            And I‚Äôm Not Going Anywhere.<br /><br />
            Forever Yours,<br />
            Vishal ‚ù§Ô∏è
          </p>

          <div class="nav-back">
            <button class="btn-primary" data-go="backToEnvelopes1">
              ‚¨Ö Back to the surprises
            </button>
          </div>
        </div>

        <div class="step step-4" id="surprise2">
          <h2>Surprise 2 üéß</h2>
          <p class="step-subtitle">Close your eyes for a second‚Ä¶ and just listen.</p>

          <div class="voice-audio">
            <audio id="voiceNote" controls>
              <!-- your own recording file, same folder -->
              <source src="voice.mp3" type="audio/mpeg">
            </audio>
          </div>

          <p class="tiny-hint">
            You can replace this with your own voice note so she hears <b>you</b>.
          </p>

          <div class="nav-back">
            <button class="btn-primary" data-go="backToEnvelopes2">
              ‚¨Ö Back to the surprises
            </button>
          </div>
        </div>

        <div class="step step-5" id="surprise3">
          <h2>Surprise 3 üíç</h2>
          <p class="step-subtitle">This is the important one.</p>

          <p class="final-message">
            No Matter How Far Apart We Are, My Feelings For You Keep Finding Their Way
            Back To The Same Place ‚Äî Choosing You In Every Thought, Every Quiet Moment,
            And Every Tomorrow I Picture For Myself.<br /><br />
            I‚Äôm Not Just Dreaming Of The Big, Special Moments With You; I‚Äôm Holding Space
            For The Simple Ones Too ‚Äî The Slow Days, The Silly Talks, The Nights Where
            We‚Äôre Tired But Still Want Each Other‚Äôs Voice.<br /><br />
            I May Have Asked You Once Before‚Ä¶ But This Valentine‚Äôs Week, With Everything
            My Heart Still Holds, I Want To Ask You Again ‚Äî The Right Way.
          </p>

          <p class="question">
            Will You Be My Valentine? ‚ù§Ô∏èüíû
          </p>

          <div class="valentine-buttons">
            <button class="yes-btn" id="yesBtn">Yes, Forever üíç</button>
            <button class="no-btn" id="noBtn">No üôà</button>
          </div>

          <p class="tiny-hint" id="yesMessage" style="display:none;">
            Screenshot This And Send It To Me‚Ä¶ I‚Äôm Keeping This Moment Forever. ü•∫üíï
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const heartContainer = document.getElementById("heartContainer");

    function createEmojiHeart() {
      const heart = document.createElement("div");
      heart.className = "emoji-heart";
      heart.textContent = "üíó";

      const size = Math.random() * 14 + 16;
      heart.style.fontSize = size + "px";

      const left = Math.random() * 100;
      heart.style.left = left + "vw";

      const duration = Math.random() * 6 + 8;
      heart.style.animationDuration = duration + "s";

      const delay = Math.random() * 3;
      heart.style.animationDelay = delay + "s";

      heart.style.top = "100vh";
      heart.style.opacity = Math.random() * 0.4 + 0.6;

      heartContainer.appendChild(heart);
      setTimeout(() => heart.remove(), (duration + delay) * 1000 + 500);
    }

    for (let i = 0; i < 18; i++) createEmojiHeart();
    setInterval(createEmojiHeart, 420);

    const musicToggle = document.getElementById("musicToggle");
    const bgMusic = document.getElementById("bgMusic");

    musicToggle.addEventListener("click", async () => {
      try {
        if (bgMusic.muted || bgMusic.paused) {
          bgMusic.muted = false;
          await bgMusic.play();
          musicToggle.classList.add("active");
          musicToggle.querySelector("span").textContent = "Music on";
        } else {
          bgMusic.pause();
          musicToggle.classList.remove("active");
          musicToggle.querySelector("span").textContent = "Music off";
        }
      } catch (e) {
        console.log(e);
      }
    });

    const steps = document.querySelectorAll(".step");
    function showStep(index) {
      steps.forEach((s, i) => s.classList.toggle("active", i === index - 1));
      const active = document.querySelector(".step.active");
      if (active) active.scrollTop = 0;
    }

    const giftBox = document.getElementById("giftBox");
    const openGiftBtn = document.getElementById("openGiftBtn");

    function openGift() {
      if (!giftBox.classList.contains("opened")) {
        giftBox.classList.add("opened");
        setTimeout(() => showStep(2), 700);
      } else {
        showStep(2);
      }
    }

    giftBox.addEventListener("click", openGift);
    openGiftBtn.addEventListener("click", openGift);

    const envelopes = document.querySelectorAll(".envelope");
    envelopes.forEach(env => {
      env.addEventListener("click", () => {
        const t = env.getAttribute("data-target");
        if (t === "surprise1") showStep(3);
        if (t === "surprise2") showStep(4);
        if (t === "surprise3") showStep(5);
      });
    });

    document.querySelector("[data-go='backToEnvelopes1']").addEventListener("click", () => {
      showStep(2);
    });

    document.querySelector("[data-go='backToEnvelopes2']").addEventListener("click", () => {
      const voiceNoteEl = document.getElementById("voiceNote");
      if (voiceNoteEl && !voiceNoteEl.paused) voiceNoteEl.pause();
      showStep(2);
    });

    const voiceNote = document.getElementById("voiceNote");
    if (voiceNote) {
      voiceNote.addEventListener("play", () => {
        if (!bgMusic.paused) {
          bgMusic.pause();
          musicToggle.classList.remove("active");
          musicToggle.querySelector("span").textContent = "Music off";
        }
      });
    }

    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const yesMessage = document.getElementById("yesMessage");

    const noModal = document.getElementById("noModal");
    const modalOkBtn = document.getElementById("modalOkBtn");

    noBtn.addEventListener("click", () => {
      noModal.classList.add("show");
    });

    modalOkBtn.addEventListener("click", () => {
      noModal.classList.remove("show");
      noBtn.style.display = "none";
    });

    yesBtn.addEventListener("click", () => {
      yesMessage.style.display = "block";
      for (let i = 0; i < 20; i++) setTimeout(createEmojiHeart, i * 80);
    });
  </script>
</body>
</html>
